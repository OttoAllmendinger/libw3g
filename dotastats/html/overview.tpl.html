<!--! vi:ft=genshi
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:py="http://genshi.edgewall.org/">
    <head>
        <title>DotA Overview</title>
        <style type="text/css">
            /*
                http://colorschemedesigner.com/#3-32CvKhNF3nk
            */
            body {
                background: #030336;
                font-family: Georgia;
                color: white;
            }

            h1 .date {
                color: #617197;
                font-size: 80%;
                margin-left: 2em;
            }

            .footer {
                margin-top: 100px;
                text-align: right;
                color: #617197;
            }

            table.overview {
                margin-left: auto;
                margin-right: auto;
                text-align: center;
                border-collapse: separate;
                border-spacing: 0;
                border: 2px solid #1d1d43;
                -webkit-border-radius: 10px;
            }

            table.overview td {
                background: #101063;
            }

            table.overview .game_index {
                width: 32px;
            }

            table.overview td.player_stat {
                padding: 8px;
                width: 64px;
                height: 64px;
            }

            table.overview td.score div {
                font-size: 200%;
                width: 64px;
                height: 64px;
                display: table-cell;
                vertical-align: middle;
            }

            table.overview td * {
                vertical-align: middle;
            }

            table.overview td.hero_image {
                border-left: 2px solid #1d1d43;
            }

            table.overview td.win.score div {
                background: #335301;
            }

            table.overview td.fail.score div {
                background: #4b0004;
            }

            table.overview th {
                background: #1d1d43;
                padding: .5em;
            }

            table.overview th:first-child {
                -webkit-border-top-left-radius: 10px;
            }

            table.overview th:last-child {
                -webkit-border-top-right-radius: 10px;
            }

            table.overview tr:last-child td:first-child {
                -webkit-border-bottom-left-radius: 10px;
            }

            table.overview tr:last-child td:last-child {
                -webkit-border-bottom-right-radius: 10px;
            }

        </style>
    </head>
    <body>
        <div py:for="play_day in playdays">
        <h1>${play_day.week_day} <span class="date">${play_day.date}</span></h1>
        <table class="overview">
            <tr>
                <th class="game_index">#</th>
                <th py:for="player in players" colspan="2">${player}</th>
            </tr>
            <tr py:for="n, game in enumerate(play_day.games)">
                <td class="game_index" title="${game.replay_hash}">${n+1}</td>
                <py:for each="player in players">
                    <?python
                    players = game['dota']['players']
                    if not player in players:
                        tag = 'absent'
                    else:
                        image_path = get_hero_image(players[player]['hero'])
                        #image_path = 'img/sub.png'
                        tag= ('win' if players[player]['is_winner'] else 'fail')
                    ?>
                        <td class="player_stat hero_image ${tag}">
                            <py:choose test="tag">
                            <py:when test="'absent'">
                                &nbsp;
                            </py:when>
                            <py:otherwise>
                                <img src="${image_path}" />
                            </py:otherwise>
                            </py:choose>
                        </td>
                        <td class="player_stat score ${tag}">
                            <py:choose test="tag">
                            <py:when test="'absent'">
                                &nbsp;
                            </py:when>
                            <py:otherwise>
                                <div> ${game.dota.players[player].kills} </div>
                            </py:otherwise>
                            </py:choose>
                        </td>
                </py:for>
            </tr>
        </table>
        </div>
        <div class="footer">
            libw3g.libdota.dotastats.r${libw3g_version}
        </div>
    </body>
</html>
