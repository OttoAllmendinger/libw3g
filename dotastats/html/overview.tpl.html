<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:py="http://genshi.edgewall.org/">
    <head>
        <title>DotA Overview</title>
        <style type="text/css">
            /*
                http://colorschemedesigner.com/#3-32CvKhNF3nk
            */
            body {
                background: #030336;
                font-family: Georgia;
                color: white;
            }

            table.overview {
                margin-left: auto;
                margin-right: auto;
                text-align: center;
                border-collapse: separate;
                border-spacing: 0;
                border: 2px solid #1d1d43;
                -webkit-border-radius: 10px;
            }

            table.overview td {
                background: #101063;
            }

            table.overview .game_index {
                width: 32px;
            }

            table.overview td.player_stat {
                padding: 8px;
                width: 64px;
                height: 64px;
            }

            table.overview td.score div {
                font-size: 200%;
                width: 64px;
                height: 64px;
                display: table-cell;
                vertical-align: middle;
            }

            table.overview td * {
                vertical-align: middle;
            }

            table.overview td.win.score div {
                background: #335301;
            }

            table.overview td.fail.score div {
                background: #4b0004;
            }

            table.overview td.absent {
                background: #2a2a2a;
            }

            table.overview th {
                background: #1d1d43;
                padding: .5em;
            }

            table.overview th:first-child {
                -webkit-border-top-left-radius: 10px;
            }

            table.overview th:last-child {
                -webkit-border-top-right-radius: 10px;
            }

            table.overview tr:last-child td:first-child {
                -webkit-border-bottom-left-radius: 10px;
            }

            table.overview tr:last-child td:last-child {
                -webkit-border-bottom-right-radius: 10px;
            }

        </style>
    </head>
    <body>
        <div py:for="play_day in play_days">
        <h1>${play_day.title}</h1>
        <table class="overview">
            <tr>
                <th class="game_index">#</th>
                <th py:for="player in players" colspan="2">${player}</th>
            </tr>
            <tr py:for="n, game in enumerate(play_day.games)">
                <td class="game_index">${n+1}</td>
                <py:for each="player in players">
                    <?python
                    if not player in game['players']:
                        tag = 'absent'
                    else:
                        image_path = get_hero_image(
                                        game['players'][player]['hero_id'])
                        tag = ('win' if game['players'][player]['is_winner']
                                        else 'fail')
                    ?>
                    <py:choose test="tag">
                        <py:when test="'absent'">
                            <td colspan="2"> &nbsp; </td>
                        </py:when>
                        <py:otherwise>
                            <td class="player_stat hero_image ${tag}">
                                <img src="${image_path}" />
                            </td>
                            <td class="player_stat score ${tag}">
                                <div> ${game.players[player].kills} </div>
                            </td>
                        </py:otherwise>
                    </py:choose>
                </py:for>
            </tr>
        </table>
        </div>
    </body>
</html>
